<style>
    .detail-container-club {
        max-width: 500%;
        margin: 30px auto;
        padding: 20px;
        background: none;
        backdrop-filter: blur (50px);
        border-radius: 10px;
        box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2);
        background-color: rgba(255, 255, 255, 0.5);
        color: black;
    }

    .detail-club-content {
        font-family: 'Garamond';
        padding: 0.5rem;
        font-size: 2rem;
        border-radius: 5px;
        border: 5px solid #ccc;
        color: black;
        display: flex;
        justify-content: space-between;
        margin-top: 21px;
    }

    #delete-club-popUp {
        max-width: 300%;
        position: absolute;
        display: none;
        top: 35%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2;
        background: none;
        backdrop-filter: blur (50px);
        border-radius: 10px;
        background-color: rgb(255, 255, 255);
        color: black;
    }

    .title-popUp-delete {
        font-family: 'Garamond';
        padding: 0.5rem;
        font-size: 2.3rem;
        border-radius: 5px;
        margin-bottom: 20px;
        margin-bottom: 5px;
    }

    .corfirm-or-deny-delete-buttons {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        margin-top: 10px;
    }

    .club-crests-detail-image {
        margin-top: 10px;
        text-align: center;
    }

    .club-crests-detail-image img {
        width: 200px;
        height: 200px;
    }

    #update-club-popUp {
        max-width: 500%;
        position: absolute;
        display: none;
        margin: 30px auto;
        padding: 20px;
        backdrop-filter: blur (50px);
        border-radius: 10px;
        box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.2);
        background-color: rgba(38, 89, 133, 0.849);
        color: black;
        font-family: 'Garamond';
    }
</style>

<div class="detail-container-club">
    <div class="detail-club-content">
        Club name:
        {{club.dataValues.club_name}}
    </div>
    <div class="detail-club-content">
        Club adress:
        {{club.dataValues.club_adress}}
    </div>
    <div class="detail-club-content">
        Club foundation year:
        {{club.dataValues.club_foundation_year}}
    </div>
    <div class="club-crests-detail-image">
        <img src="{{image_path}}" alt="{{club.dataValues.club_name}} Emblem">
    </div>
</div>
<div class="button-container">
    <button id="update-button">
        <a href="#" class="delete-club" data-club-update-id="{{club.dataValues.id}}" data-cy='club-button-update'>
            ‚úèÔ∏è
        </a>
    
    </button>
    
        <button id="delete-button">
            <a href="#" class="delete-club" data-club-delete-id="{{club.dataValues.id}}" data-cy='club-button-delete'>
                üóëÔ∏è
            </a>
        </button>
</div>

<div id="delete-club-popUp">
    <p class="title-popUp-delete">Are you sure you want to delete this club?</p>
    <div class="corfirm-or-deny-delete-buttons">
        <button id="confirm-delete">Yes</button>
        <button id="cancel-delete">No</button>
    </div>
</div>

<form id="update-club-popUp" >
    <div class="update-club-content">
        <label for="club_name">Club name:</label>
        <input type="text" id="club_name" name="club_name" value="{{club.dataValues.club_name}}">
    </div>
    <div class="update-club-content">
        <label for="club_adress">Club address:</label>
        <input type="text" id="club_adress" name="club_adress" value="{{club.dataValues.club_adress}}">
    </div>
    <div class="update-club-content">
        <label for="club_foundation_year">Club foundation year:</label>
        <input type="text" id="club_foundation_year" name="club_foundation_year" value="{{club.dataValues.club_foundation_year}}">
    </div>
    <button type="submit" id="confirm-update">Update Club</button>
    <button id="cancel-update"> Cancel </button>
</form>

<script>

    //update script
    document.getElementById('update-button').addEventListener('click', function (event) {
    document.getElementById('update-club-popUp').style.display = 'flex';

    document.getElementById('confirm-update').addEventListener('click', async function () {
        const clubId = event.target.getAttribute('data-club-update-id');

        try {
            const response = await fetch(`/clubs/${clubId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    club_name: document.getElementById('club_name').value,
                    club_adress: document.getElementById('club_adress').value,
                    club_foundation_year: document.getElementById('club_foundation_year').value
                }),
            });

            console.log(response + " esta es la response")

        } catch (error) {
            console.log(error.message);
        }
    });
});



    //delete script
    document.getElementById('cancel-delete').addEventListener('click', function () {
        document.getElementById('delete-club-popUp').style.display = 'none';
    });

    document.getElementById('delete-button').addEventListener('click', function (event) {
        
        document.getElementById('delete-club-popUp').style.display = 'flex';
        
        document.getElementById('confirm-delete').addEventListener('click', async function () {

            // Utiliza event.target para obtener el elemento en el que se hizo clic
            const clubId = event.target.getAttribute('data-club-delete-id');

            try {


                const response = await fetch(`/clubs/${clubId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });

                if (response.ok) window.location.href = "/clubs";

            }
            catch (error) {
                console.log(error.message);
            }
        })
    })
</script>